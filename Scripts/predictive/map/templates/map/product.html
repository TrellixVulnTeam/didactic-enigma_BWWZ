{% load static %}
<!DOCTYPE html>

<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>


    <style>
 

        #map {
                width: 100%;
                height: 850px;
                background-color: grey;
            }
        .myButton {
            -moz-box-shadow:inset 0px 1px 0px 0px #97c4fe;
            -webkit-box-shadow:inset 0px 1px 0px 0px #97c4fe;
            box-shadow:inset 0px 1px 0px 0px #97c4fe;
            background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #3d94f6), color-stop(1, #1e62d0));
            background:-moz-linear-gradient(top, #3d94f6 5%, #1e62d0 100%);
            background:-webkit-linear-gradient(top, #3d94f6 5%, #1e62d0 100%);
            background:-o-linear-gradient(top, #3d94f6 5%, #1e62d0 100%);
            background:-ms-linear-gradient(top, #3d94f6 5%, #1e62d0 100%);
            background:linear-gradient(to bottom, #3d94f6 5%, #1e62d0 100%);
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#3d94f6', endColorstr='#1e62d0',GradientType=0);
            background-color:#3d94f6;
            -moz-border-radius:6px;
            -webkit-border-radius:6px;
            border-radius:6px;
            border:1px solid #337fed;
            display:inline-block;
            cursor:pointer;
            color:#ffffff;
            font-family:Arial;
            font-size:15px;
            font-weight:bold;
            padding:6px 24px;
            text-decoration:none;
            text-shadow:0px 1px 0px #1570cd;
        }
        .myButton:hover {
            background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #1e62d0), color-stop(1, #3d94f6));
            background:-moz-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);
            background:-webkit-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);
            background:-o-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);
            background:-ms-linear-gradient(top, #1e62d0 5%, #3d94f6 100%);
            background:linear-gradient(to bottom, #1e62d0 5%, #3d94f6 100%);
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#1e62d0', endColorstr='#3d94f6',GradientType=0);
            background-color:#1e62d0;
        }
        .myButton:active {
            position:relative;
            top:1px;
        }
        
        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1;
            top: 0;
            right: 0;
            background-color: #111;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
        }
        
        .sidenav a {
            padding: 8px 8px 8px 32px;
            text-decoration: none;
            font-size: 25px;
            color: #818181;
            display: block;
            transition: 0.3s;
        }
        
        .sidenav a:hover, .offcanvas a:focus{
            color: #f1f1f1;
        }
        
        .sidenav .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
        }
        
        @media screen and (max-height: 450px) {
          .sidenav {padding-top: 15px;}
          .sidenav a {font-size: 18px;}
        }
        
    </style>
    



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>
    



    <script type = "text/javascript">    
        function openNav(currentElement) {
            var name = $(currentElement).html();
            $.ajax({
                    url : "/map/data/", 
                    data : {'direction':name},
                    <!--dataType : 'html',-->
                    success : function (data) {
                    $('#mySidenav').empty().append(data);
                    $("#mySidenav").css("width" , "250px");}
            });            
        }
        
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }
        
        function DateSelect(form, date)
        {
                var Data = $('form').serializeArray();
                $('#date').val(Data[0]['value']);
        }
        
        
     


    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-uAlwABgf0eRzXK9duURPQyye0zhEreg&callback=initMap"></script>
    <script>
    function initMap() {
        var points = [
          {% for district in districts %}
            {lat: {{district.latitude}}, lng: {{district.longitude}} },
      {% endfor %}
      ];
      var center = {lat: 8.612690, lng: -11.759313};
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 8,
        center: center,
        disableDefaultUI: true,
        mapTypeId: google.maps.MapTypeId.HYBRID
      });
        
      var markerDict = [];
        for (i = 0; i < points.length; i++){
           var mark = points[i];
         markerDict.push({
                 key: i,
                 value: mark
                });
            var marker = new google.maps.Marker({
                animation: google.maps.Animation.DROP,
                  position: mark,
                map: map,
              });
          google.maps.event.addDomListener(marker, 'click', function() {
          map.setCenter(this.getPosition());
          var date = $('#date').val();
          $.ajax({
                  url : "/map/marker/",
                  data : {"lat" : this.getPosition().lat(), "lng" : this.getPosition().lng(), "date" : date},
                  dataType : 'html',
                  success : function (data) {
                          $("#mySidenav").empty().append(data);}
                  });
          document.getElementById("mySidenav").style.width = "300px";
          });
      };

        
    }
    </script>





</head>

<!-- Loop through the points *still have to figure out how to host this-->
<body>

<style>

    #overlay {
        background: #d35400;
        color: #666666;
        position: fixed;
        height: 100%;
        width: 100%;
        z-index: 5000;
        top: 0;
        left: 0;
        float: left;
        text-align: center;
        padding-top: 20%;
    }
    .sk-folding-cube {
  margin: 40px auto;
  width: 40px;
  height: 40px;
  position: relative;
  -webkit-transform: rotateZ(45deg);
          transform: rotateZ(45deg); }
  .sk-folding-cube .sk-cube {
    float: left;
    width: 50%;
    height: 50%;
    position: relative;
    -webkit-transform: scale(1.1);
        -ms-transform: scale(1.1);
            transform: scale(1.1); }
  .sk-folding-cube .sk-cube:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #fff;
    -webkit-animation: sk-foldCubeAngle 2.4s infinite linear both;
            animation: sk-foldCubeAngle 2.4s infinite linear both;
    -webkit-transform-origin: 100% 100%;
        -ms-transform-origin: 100% 100%;
            transform-origin: 100% 100%; }
  .sk-folding-cube .sk-cube2 {
    -webkit-transform: scale(1.1) rotateZ(90deg);
            transform: scale(1.1) rotateZ(90deg); }
  .sk-folding-cube .sk-cube3 {
    -webkit-transform: scale(1.1) rotateZ(180deg);
            transform: scale(1.1) rotateZ(180deg); }
  .sk-folding-cube .sk-cube4 {
    -webkit-transform: scale(1.1) rotateZ(270deg);
            transform: scale(1.1) rotateZ(270deg); }
  .sk-folding-cube .sk-cube2:before {
    -webkit-animation-delay: 0.3s;
            animation-delay: 0.3s; }
  .sk-folding-cube .sk-cube3:before {
    -webkit-animation-delay: 0.6s;
            animation-delay: 0.6s; }
  .sk-folding-cube .sk-cube4:before {
    -webkit-animation-delay: 0.9s;
            animation-delay: 0.9s; }
@-webkit-keyframes sk-foldCubeAngle {
  0%, 10% {
    -webkit-transform: perspective(140px) rotateX(-180deg);
            transform: perspective(140px) rotateX(-180deg);
    opacity: 0; }
  25%, 75% {
    -webkit-transform: perspective(140px) rotateX(0deg);
            transform: perspective(140px) rotateX(0deg);
    opacity: 1; }
  90%, 100% {
    -webkit-transform: perspective(140px) rotateY(180deg);
            transform: perspective(140px) rotateY(180deg);
    opacity: 0; } }
@keyframes sk-foldCubeAngle {
  0%, 10% {
    -webkit-transform: perspective(140px) rotateX(-180deg);
            transform: perspective(140px) rotateX(-180deg);
    opacity: 0; }
  25%, 75% {
    -webkit-transform: perspective(140px) rotateX(0deg);
            transform: perspective(140px) rotateX(0deg);
    opacity: 1; }
  90%, 100% {
    -webkit-transform: perspective(140px) rotateY(180deg);
            transform: perspective(140px) rotateY(180deg);
    opacity: 0; } }
    
</style>
<div id="overlay">
 <div class="sk-folding-cube">
        <div class="sk-cube1 sk-cube"></div>
        <div class="sk-cube2 sk-cube"></div>
        <div class="sk-cube4 sk-cube"></div>
        <div class="sk-cube3 sk-cube"></div>
        </div>
        <img src="{% static '/img/logo.png' %}"> </div>
</div>

  

<!--{% include "map/sidebar.html" %}-->
<div id=sidebar>
    <div id="mySidenav" class="sidenav">
    </div>
</div>


<h4><a href="/map/">Home</a></h4>



<h1>Predictive26 Main Map Page</h1>

<p>Here you can explore cases as a timeline and look at the data we have received about the area. Feel free to look around!</p>

<hr>
<!--
<div width="200px">
<input type="range" min="0" max="100"></input>
</div>
<h3>My Google Maps Demo</h3>
<form id=dateForm>
    Exact Date:
    <input type="date" name="filter-date" id="dateGrab">
    Start Date:
    <input type="date" name="start">
    End Date:
    <input type="date" name="end">
    <button type="button" onclick="DateSelect(this.form, this.form.filter-date)">Submit</button>
</form>
-->
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Get started with SceneView - Create a 3D map</title>
<style>
  html, body, #viewDiv {
    padding: 0;
    margin: 0;
    height: 100%;
    width: 100%;
  }
</style>
<link rel="stylesheet" href="https://js.arcgis.com/4.4/esri/css/main.css">
<script src="https://js.arcgis.com/4.4/"></script>
<script>
require([
  "esri/Map",
  "esri/views/SceneView",
  "esri/layers/TileLayer",
  "dojo/domReady!",
  "dojo/dom",
  "dojo/on",
], function(Map, SceneView, TileLayer, dom, on){

    var sierraLeone = new TileLayer({
            url: "/map/zoom/",
                id: "sierra",
                opacity: 0.9
            });
    var map = new Map({
        basemap: "national-geographic",
        ground: "world-elevation",
        layers: [sierraLeone]
    });
    var view = new SceneView({
    container: "viewDiv",     // Reference to the scene div created in step 5
    map: map,                 // Reference to the map object created before the scene
    //scale: 2500000,           Sets the initial scale to 1:50,000,000
    center: [-97.5164, 35.4676]   //Sets the center point of view with lon/lat
  });
    setTimeout(function(){view.then(function(){
            sierraLeone.then(function(){
                    view.goTo(sierraLeone.fullExtent);
                    });
            })}, 3500);   
});
</script>
</head>
<body>
  <div id="viewDiv"></div>
</body>

<!--
<input type="hidden" id="date">
<div id="map"></div>
</div>-->
<script>
setTimeout(function(){jQuery('#overlay').fadeOut("slow")},3000);

</script>
</body>
</html>